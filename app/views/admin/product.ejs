<!DOCTYPE html>
<html lang="en">

<head>
	<% include layouts/header %>
</head>

<body>
	<!--Preloader-->
	<div class="preloader-it">
		<div class="la-anim-1"></div>
	</div>
	<!--/Preloader-->
	<div class="wrapper theme-5-active pimary-color-green">

		<% include layouts/menu %>

			<!-- Main Content -->
			<div class="page-wrapper">
				<div class="container-fluid">
					<!-- Title -->
					<div class="row heading-bg">
						<div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
							<h5 class="txt-dark">Trang quản trị sản phẩm</h5>
						</div>
						<div class="col-lg-3" style="float: right">
							<a class="btn btn-primary" style="float: right" href="/admin/products/add">Thêm sản phẩm</a>
						</div>
					</div>
					<!-- /Title -->

					<div class="row">
						<div class="col-xs-6 col-xs-offset-2" style="float: right;margin-bottom: 20px;">
							<div class="input-group">
								<div class="input-group-btn search-panel">
									<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
										<span id="search_concept">Filter by</span>
										<span class="caret"></span>
									</button>
									<ul class="dropdown-menu" role="menu">
										<li>
											<a href="#contains">Contains</a>
										</li>
										<li>
											<a href="#its_equal">It's equal</a>
										</li>
										<li>
											<a href="#greather_than">Greather than &gt;</a>
										</li>
										<li>
											<a href="#less_than">Less than &lt; </a>
										</li>
										<li class="divider"></li>
										<li>
											<a href="#all">Anything</a>
										</li>
									</ul>
								</div>
								<input type="hidden" name="search_param" value="all" id="search_param">
								<input type="text" class="form-control" name="x" placeholder="Search term...">
								<span class="input-group-btn">
									<button class="btn btn-default" type="button">
										<span class="glyphicon glyphicon-search"></span>
									</button>
								</span>
							</div>
						</div>
					</div>

					<!-- Row -->
					<div class="row">
						<div class="col-sm-12">
							<div class="panel panel-default card-view">
								<div class="panel-wrapper collapse in">
									<div class="panel-body row">
										<div class="table-wrap">
											<div class="table-responsive">
												<table class="table display responsive product-overview mb-30" id="table_products">
													<thead>
														<tr>
															<th>Tên sản phẩm</th>
															<th>Ảnh</th>
															<th>Màu sắc</th>
															<th>Giá</th>
															<th>Nhà sản xuất</th>
															<th>Chi tiết sản phẩm</th>
															<th>Trạng thái</th>
															<th>Chức năng</th>
														</tr>
													</thead>
													<tbody>
														<!-- ROWS -->
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- /Row -->

					<div class="row">
						<div class="col-sm-6" style="
					float: right;">
							<ul class="pagination" style="float: right;;">
								<li class="page-item">
									<a class="page-link" href="#">Previous</a>
								</li>
								<li class="page-item active">
									<a class="page-link" href="#">1</a>
								</li>
								<li class="page-item">
									<a class="page-link" href="#">2</a>
								</li>
								<li class="page-item">
									<a class="page-link" href="#">3</a>
								</li>
								<li class="page-item">
									<a class="page-link" href="#">Next</a>
								</li>
							</ul>
						</div>
					</div>
				</div>

				<!-- Footer -->
				<footer class="footer container-fluid pl-30 pr-30">
					<div class="row">
						<div class="col-sm-12">
							<p>2018 &copy; Droopy. Pampered by Hencework</p>
						</div>
					</div>
				</footer>
				<!-- /Footer -->

			</div>
			<!-- /Main Content -->

	</div>
	<!-- /#wrapper -->

	<!-- JavaScript -->

	<!-- jQuery -->
	<script type="text/javascript" src="/static/admin/libs/jquery/dist/jquery.min.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script type="text/javascript" src="/static/admin/libs/bootstrap/dist/js/bootstrap.min.js"></script>

	<!-- Data table JavaScript -->
	<script type="text/javascript" src="/static/admin/libs/datatables/media/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="/static/admin/js/productorders-data.js"></script>

	<!-- Slimscroll JavaScript -->
	<script type="text/javascript" src="/static/admin/js/jquery.slimscroll.js"></script>

	<!-- Owl JavaScript -->
	<script type="text/javascript" src="/static/admin/libs/owl.carousel/dist/owl.carousel.min.js"></script>

	<!-- Switchery JavaScript -->
	<script type="text/javascript" src="/static/admin/libs/switchery/dist/switchery.min.js"></script>

	<!-- Fancy Dropdown JS -->
	<script type="text/javascript" src="/static/admin/js/dropdown-bootstrap-extended.js"></script>

	<!-- Init JavaScript -->
	<script type="text/javascript" src="/static/admin/js/init.js"></script>

	<script type="text/javascript">
		jQuery(document).ready(($) => {

			//load products
			$.get('./products/list', (data) => {
				if (data.products && data.products.length > 0) {
					data.products.forEach(product => {
						var color = "";
						if (product.colors) {
							product.colors.forEach(e => {
								color = color + ", " + e
							});

							color = color.slice(1, color.length -1);
						}

						var brand;
						if (product.brand) {
							brand = product.brand.name || "Không có";
						}

						var tr = `
							<tr id="${product._id}">
								<td class="txt-dark product-name">${product.name}</td>
								<td>
									<img src="${product.images[0].url}" alt="${product.images[0].alt}" width="80">
								</td>
								<td>${color}</td>
								<td>${product.price || "Không có"}</td>
								<td>${brand}</td>
								<td>
									<a href="#">Xem chi tiết</a>
								</td>
								<td>
									<span class="label label-success font-weight-100">Còn hàng</span>
								</td>
								<td>
									<a href="javascript:void(0)" class="text-inverse pr-10" title="Edit" data-toggle="tooltip">
										<i class="zmdi zmdi-edit txt-warning"></i>
									</a>
									<a href="javascript:void(0)" class="text-inverse" title="Delete" data-toggle="tooltip">
										<i class="zmdi zmdi-delete txt-danger"></i>
									</a>
								</td>
							</tr>
						`

						$('#table_products tbody').append(tr)
					});
				}
			}).error((err) => {
				window.console.log(err);
			});

			$('.search-panel .dropdown-menu').find('a').click(function (e) {
				e.preventDefault();
				var param = $(this).attr("href").replace("#", "");
				var concept = $(this).text();
				$('.search-panel span#search_concept').text(concept);
				$('.input-group #search_param').val(param);
			});
		});
	</script>

</body>

</html>