<!DOCTYPE html>
<html lang="en">

<head>
    <% include layouts/header %>           
</head>

<body>
    <!--Preloader-->
    <div class="preloader-it">
        <div class="la-anim-1"></div>
    </div>
    <!--/Preloader-->
    <div class="wrapper theme-5-active pimary-color-green">
        <% include layouts/menu %>
            <!-- Main Content -->
            <div class="page-wrapper">
                <div class="container-fluid">
                    <!-- Title -->
                    <div class="row heading-bg">
                        <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12" style="width: 100%">
                            <h5 class="txt-dark" style="float: left;">Trang quản trị người dùng</h5>
                            <button type="button" class="btn btn-primary" style="float: right" id="brand-add">Thêm mới</button>
                        </div>
                    </div>
                    <!-- /Title -->
                    <!-- /.modal -->

                    <!-- Row -->
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="panel panel-default card-view">
                                <div class="panel-wrapper collapse in">
                                    <div class="panel-body row">
                                        <div class="table-wrap">
                                            <div class="table-responsive">
                                                <table class="table display mb-30" cellspacing="0" width="100%" id="table-users">
                                                    <thead>
                                                        <tr>
                                                            <th>#</th>
                                                            <th>Tên người dùng</th>
                                                            <th>Email</th>
                                                            <th>Số điện thoại</th>
                                                            <th>Giới tính</th>
                                                            <th>Vai trò</th>
                                                            <th>Trạng thái</th>
                                                            <th>Chức năng</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                            <% if (data.users && data.users.length != 0) { %>
                                                                <% data.users.forEach((user) => { %>                                                                    
                                                                    <tr role="row" id="<%- user.id %>"> 
                                                                        <td class="td-id">
                                                                            <%- user._id %>
                                                                        </td>
                                                                        <td class="txt-dark td-name">
                                                                            <% if (user.fullName) { %>
                                                                                <%- user.fullName.firstName || "" + " " + user.fullName.lastName || "" %>
                                                                            <% } %>                                                                            
                                                                        </td>
                                                                        <td class="txt-dark td-email">
                                                                                <%- user.email || "" %>
                                                                            </td>
                                                                        <td class="txt-dark td-phone">
                                                                                <%- user.phone || "" %>
                                                                            </td>
                                                                        <td class="txt-dark td-sex">
                                                                            <%- user.sex || "" %>
                                                                        </td>
                                                                        <td class="txt-dark td-role">
                                                                                <% if (user.role) { %>
                                                                                    <%- user.role.name %>
                                                                                    <% } %>
                                                                            </td>
                                                                        <td>
                                                                            <% if (user.status == true) { %>
                                                                                <span class="label label-success font-weight-100">ACTIVE</span>
                                                                            <% } else { %>
                                                                                <span class="label label-default font-weight-100">DEACTIVE</span>
                                                                            <% } %>
                                                                            
                                                                        </td>
                                                                        <td class="action-brand">
                                                                            <a href="javascript:void(0)" class="text-inverse pr-10 edit-user" title="Chỉnh sửa người dùng">
                                                                                <i class="zmdi zmdi-edit txt-warning"></i>
                                                                            </a>
                                                                            <a href="javascript:void(0)" class="text-inverse pr-10 reset-password-user" title="Reset mật khẩu người dùng">
                                                                                    <i class="zmdi zmdi-refresh-sync text-success"></i>
                                                                            </a>
                                                                            <a href="javascript:void(0)" class="text-inverse delete-user" title="Xoá người dùng">
                                                                                <i class="zmdi zmdi-delete txt-danger"></i>
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                <% }); %>
                                                            <% } %>
                                                    </tbody>
                                                    <tfoot>
                                                        <tr>
                                                            <th>#</th>
                                                            <th>Tên người dùng</th>
                                                            <th>Email</th>
                                                            <th>Giới tính</th>
                                                            <th>Vai trò</th>
                                                            <th>Trạng thái</th>
                                                            <th>Chức năng</th>
                                                        </tr>
                                                    </tfoot>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /Row -->
                        <!-- Footer -->
                        <footer class="footer container-fluid pl-30 pr-30">
                            <div class="row">
                                <div class="col-sm-12">
                                    <p>2018 &copy; Alomobile</p>
                                </div>
                            </div>
                        </footer>
                        <!-- /Footer -->    
                    </div>
                    <!-- /Main Content -->
                </div>
                <!-- /#wrapper -->
                <% include layouts/footer %>
                <script type="text/javascript" src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
                    <script type="text/javascript">
                        function showAlert(id, content) {
                            var alert = `
                            <div class="alert alert-danger alert-dismissable">
                                <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                                ${content}
                            </div>
                        `
                            $(id).append(alert);
                        }

                        function confirmDelete(cb) {
                            swal({
                                    title: "Bạn có muốn xoá không?",
                                    text: "Nhấn vào 'Đồng ý' để xoá, không thể phục hồi được sau khi xoá!",
                                    icon: "info",
                                    buttons: {
                                        cancel: true,
                                        yes: "Đồng ý"
                                    },
                                })
                                .then((value) => {
                                    switch (value) {     
                                        case "yes":
                                            return cb(true);
                                            break;                               
                                        default:
                                            return cb(false);
                                            break;
                                    }
                                }); 
                        }

                    </script>
                    <script>
                        var tableUsers = $("#table-users").DataTable({
                            "language": {
                                "lengthMenu": "Hiển thị _MENU_ dòng trên một trang",
                                "zeroRecords": "Từ khoá nhập vào không khớp",
                                "info": "Đang ở trang thứ _PAGE_ của _PAGES_",
                                "infoEmpty": "Dữ liệu hiện không sẵn có",
                                "infoFiltered": "(đã lọc từ _MAX_ người dùng hiện có)"
                            }
                        });

                        jQuery(document).ready(($) => {

                        });

                    </script>
</body>

</html>