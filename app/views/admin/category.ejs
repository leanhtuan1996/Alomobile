<!DOCTYPE html>
<html lang="en">

<head>
	<% include layouts/header %>
</head>

<body>
	<!--Preloader-->
	<div class="preloader-it">
		<div class="la-anim-1"></div>
	</div>
	<!--/Preloader-->
	<div class="wrapper theme-5-active pimary-color-green">

		<% include layouts/menu %>

		<!-- Main Content -->
		<div class="page-wrapper">
			<div class="container-fluid">
				<!-- Title -->
				<div class="row heading-bg">
					<div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
						<h5 class="txt-dark">Trang quản trị danh mục</h5>
					</div>
					<div class="col-lg-3" style="float: right">
						<a class="btn btn-primary" style="float: right" href="/admin/categories/add">Thêm danh mục</a>
					</div>
				</div>
				<!-- /Title -->

				<!-- Row -->
				<div class="row">
					<div class="col-sm-12">
						<div class="panel panel-default card-view">
							<div class="panel-wrapper collapse in">
								<div class="panel-body row">
									<div class="table-wrap">
										<div class="table-responsive">
											<table class="table display responsive product-overview mb-30" id="myTable">
												<thead>
													<tr>
														<th>#ID</th>
														<th>Tên danh mục</th>
                                                        <th>Alias</th>
                                                        <th>Icon</th>
														<th>Trạng thái</th>
														<th>Chức năng</th>
													</tr>
												</thead>
                                                <tbody>
                                                
                                                    <% var categories = data.categories || [] %>

                                                    <% if (categories && categories.length != 0){ %>
                                                    <% categories.forEach((category) => { %>
                                                        <% var subCategories = category.subCategories || []; %>
                                                        <% if (subCategories && subCategories.length != 0) { %>

                                                            <tr>
                                                                <td class="txt-dark"><%- category._id %></td>
                                                                <td style="font-size: 18px; color: blue"><%- category.name %></td>
                                                                <td class="txt-dark"><%- category.alias %></td>
                                                                <td>
                                                                    <% if (category.icon) { %>
                                                                        <img src="<%- category.icon %>" alt="<%- category.alias %>" width="24">
                                                                    <% } else { %>
                                                                        Không có
                                                                    <% } %>
                                                                    
                                                                </td>
                                                                <td>
                                                                    <span class="label label-success font-weight-100">ACTIVE</span>
                                                                </td>
                                                                <td>
                                                                    <a href="javascript:void(0)" class="text-inverse pr-10" title="Edit" data-toggle="tooltip">
                                                                        <i class="zmdi zmdi-edit txt-warning"></i>
                                                                    </a>
                                                                    <a href="javascript:void(0)" class="text-inverse" title="Delete" data-toggle="tooltip">
                                                                        <i class="zmdi zmdi-delete txt-danger"></i>
                                                                    </a>
                                                                </td>
                                                            </tr>

                                                            <% subCategories.forEach((sub) => { %>
                                                                <% var items = sub.items || []; %>
                                                                <% if (items && items.length != 0) { %>
                                                                    <% items.forEach((item) => { %>
                                                                        <tr>
                                                                        <td class="txt-dark"><%- category._id %></td>
                                                                        <td style="color: green">-----<%- item.name %></td>
                                                                        <td class="txt-dark"><%- item.alias %></td>
                                                                        <td>
                                                                            <% if (item.icon) { %>
                                                                                <img src="<%- item.icon %>" alt="<%- item.alias %>" width="24">
                                                                            <% } else { %>
                                                                                Không có
                                                                            <% } %>
                                                                        </td>
                                                                        <td>
                                                                            <span class="label label-success font-weight-100">ACTIVE</span>
                                                                        </td>
                                                                        <td>
                                                                            <a href="javascript:void(0)" class="text-inverse pr-10" title="Edit" data-toggle="tooltip">
                                                                                <i class="zmdi zmdi-edit txt-warning"></i>
                                                                            </a>
                                                                            <a href="javascript:void(0)" class="text-inverse" title="Delete" data-toggle="tooltip">
                                                                                <i class="zmdi zmdi-delete txt-danger"></i>
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                    <% }); %>
                                                                <% } %>
                                                            <% }); %>
                                                        <% } else { %>
                                                            <tr>
                                                                <td class="txt-dark"><%- category._id %></td>
                                                                <td style="font-size: 18px; color: blue"><%- category.name %></td>
                                                                <td class="txt-dark"><%- category.alias %></td>
                                                                <td>
                                                                    <img src="<%- category.icon %>" alt="iMac" width="24">
                                                                </td>
                                                                <td>
                                                                    <span class="label label-success font-weight-100">ACTIVE</span>
                                                                </td>
                                                                <td>
                                                                    <a href="javascript:void(0)" class="text-inverse pr-10" title="Edit" data-toggle="tooltip">
                                                                        <i class="zmdi zmdi-edit txt-warning"></i>
                                                                    </a>
                                                                    <a href="javascript:void(0)" class="text-inverse" title="Delete" data-toggle="tooltip">
                                                                        <i class="zmdi zmdi-delete txt-danger"></i>
                                                                    </a>
                                                                </td>
                                                            </tr>
                                                        <% } %>
                                                    <% }); %>
                                                    <% } %>													
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- /Row -->
			</div>

			<!-- Footer -->
			<footer class="footer container-fluid pl-30 pr-30">
				<div class="row">
					<div class="col-sm-12">
						<p>2018 &copy; Droopy. Pampered by Hencework</p>
					</div>
				</div>
			</footer>
			<!-- /Footer -->

		</div>
		<!-- /Main Content -->

	</div>
	<!-- /#wrapper -->

    <% include layouts/footer %>
	<!-- Data table JavaScript -->
	<script src="/static/admin/vendors/bower_components/datatables/media/js/jquery.dataTables.min.js"></script>
	<script src="/static/admin/js/productorders-data.js"></script>

	<!-- Init JavaScript -->
	<script src="/static/admin/js/init.js"></script>

</body>
</html>